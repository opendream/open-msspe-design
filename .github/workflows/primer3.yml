name: Build and Test Primer3 on Windows

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-windows:
    runs-on: windows-latest
    steps:
      - name: Checkout Primer3 Repository
        uses: actions/checkout@v4
        with:
          repository: primer3-org/primer3
          ref: v2.3.7

      - name: Check Compiler
        run: |
          gcc --version
          g++ --version
        shell: cmd

      - name: Compile and Test Primer3
        run: |
          cd src
          mingw32-make CC=gcc COMPILE.c="gcc $(CFLAGS) -c" TESTOPTS=--windows
        shell: cmd
